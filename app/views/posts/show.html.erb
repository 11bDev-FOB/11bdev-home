<!-- Blog Post Detail: Tales from the Foxhole - Minimal Style -->
<section class="py-20 bg-vintage-cream min-h-screen">
  <div class="max-w-2xl mx-auto px-4 sm:px-6">
    <div class="mb-8">
      <%= link_to "â† Back to Tales from the Foxhole", posts_path, class: "text-olive hover:text-dark-olive font-semibold transition-colors" %>
    </div>
    <article class="border-b border-gray-300 pb-12">
      <h1 class="text-5xl font-bold text-dark-olive mb-8 leading-tight"><%= @post.title %></h1>
      <div class="text-sm text-gray-500 mb-12">
        <%= @post.published_at&.strftime('%B %d, %Y') %>
        <% if @post.tag_list.any? %>
          <% @post.tag_list.each do |tag| %>
            <span class="ml-2 text-olive">#<%= tag %></span>
          <% end %>
        <% end %>
      </div>
      <% if @post.featured_image.attached? %>
        <div class="mb-12">
          <%= image_tag @post.featured_image, class: "w-full h-auto" %>
        </div>
      <% end %>
      <div class="prose prose-lg max-w-none leading-relaxed" style="font-size: 1.25rem; line-height: 1.8;">
        <style>
          /* Blog post typography - Light mode */
          .prose p { 
            margin-bottom: 1.5em; 
            font-size: 1.25rem;
            line-height: 1.8;
            color: #2d3d24;
          }
          .prose h1, .prose h2, .prose h3, .prose h4, .prose h5, .prose h6 { 
            margin-top: 2em; 
            margin-bottom: 1em;
            color: #4a5f3a;
            font-weight: 700;
            line-height: 1.3;
          }
          .prose h1 { font-size: 2rem; }
          .prose h2 { font-size: 1.75rem; }
          .prose h3 { font-size: 1.5rem; }
          .prose h4 { font-size: 1.25rem; }
          .prose h5 { font-size: 1.125rem; }
          .prose h6 { font-size: 1rem; }
          
          .prose strong, .prose b { 
            font-weight: 700; 
            color: #2d3d24;
          }
          .prose em, .prose i {
            font-style: italic;
          }
          
          .prose a {
            color: #6b8e4e;
            text-decoration: underline;
            font-weight: 500;
          }
          .prose a:hover {
            color: #4a5f3a;
          }
          
          /* Lists */
          .prose ul, .prose ol {
            margin-bottom: 1.5em;
            margin-top: 1em;
            padding-left: 2em;
            font-size: 1.25rem;
            line-height: 1.8;
          }
          .prose ul {
            list-style-type: disc;
          }
          .prose ol {
            list-style-type: decimal;
          }
          .prose li {
            margin-bottom: 0.75em;
            color: #2d3d24;
            padding-left: 0.5em;
          }
          .prose li p {
            margin-bottom: 0.5em;
          }
          .prose ul ul, .prose ol ul {
            list-style-type: circle;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
          }
          .prose ul ol, .prose ol ol {
            list-style-type: lower-alpha;
            margin-top: 0.5em;
            margin-bottom: 0.5em;
          }
          
          /* Blockquotes */
          .prose blockquote {
            border-left: 4px solid #6b8e4e;
            padding-left: 1.5em;
            margin: 2em 0;
            font-style: italic;
            color: #5a5a5a;
          }
          .prose blockquote p {
            margin-bottom: 1em;
          }
          
          /* Code */
          .prose code {
            background-color: #f5f5f5;
            padding: 0.2em 0.4em;
            border-radius: 3px;
            font-family: 'Courier New', Courier, monospace;
            font-size: 0.9em;
            color: #d73a49;
          }
          .prose pre {
            background-color: #f5f5f5;
            padding: 1em;
            border-radius: 5px;
            overflow-x: auto;
            margin: 1.5em 0;
          }
          .prose pre code {
            background-color: transparent;
            padding: 0;
            color: #2d3d24;
          }
          
          /* Horizontal rules */
          .prose hr {
            border: none;
            border-top: 2px solid #d2b48c;
            margin: 2em 0;
          }
          
          /* Tables */
          .prose table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5em 0;
          }
          .prose th, .prose td {
            border: 1px solid #d2b48c;
            padding: 0.75em;
            text-align: left;
          }
          .prose th {
            background-color: #f5f0e8;
            font-weight: 600;
          }

          /* Dark mode overrides */
          body.dark-mode .prose p,
          html.dark-mode .prose p {
            color: #d1d5db !important;
          }
          body.dark-mode .prose h1,
          body.dark-mode .prose h2,
          body.dark-mode .prose h3,
          body.dark-mode .prose h4,
          body.dark-mode .prose h5,
          body.dark-mode .prose h6,
          html.dark-mode .prose h1,
          html.dark-mode .prose h2,
          html.dark-mode .prose h3,
          html.dark-mode .prose h4,
          html.dark-mode .prose h5,
          html.dark-mode .prose h6 {
            color: #b8d49f !important;
          }
          body.dark-mode .prose strong,
          body.dark-mode .prose b,
          html.dark-mode .prose strong,
          html.dark-mode .prose b {
            color: #e5e7eb !important;
          }
          body.dark-mode .prose a,
          html.dark-mode .prose a {
            color: #b8d49f !important;
          }
          body.dark-mode .prose a:hover,
          html.dark-mode .prose a:hover {
            color: #d4e8c4 !important;
          }
          body.dark-mode .prose li,
          html.dark-mode .prose li {
            color: #d1d5db !important;
          }
          body.dark-mode .prose blockquote,
          html.dark-mode .prose blockquote {
            border-left-color: #b8d49f !important;
            color: #e5e7eb !important;
          }
          body.dark-mode .prose code,
          html.dark-mode .prose code {
            background-color: #374151 !important;
            color: #fca5a5 !important;
          }
          body.dark-mode .prose pre,
          html.dark-mode .prose pre {
            background-color: #1f2937 !important;
          }
          body.dark-mode .prose pre code,
          html.dark-mode .prose pre code {
            color: #d1d5db !important;
          }
          body.dark-mode .prose hr,
          html.dark-mode .prose hr {
            border-top-color: #4B5E40 !important;
          }
          body.dark-mode .prose th,
          body.dark-mode .prose td,
          html.dark-mode .prose th,
          html.dark-mode .prose td {
            border-color: #4B5E40 !important;
            color: #d1d5db !important;
          }
          body.dark-mode .prose th,
          html.dark-mode .prose th {
            background-color: #374151 !important;
          }
        </style>
        <%= markdown(@post.content) %>
      </div>
      
      <!-- Reply by Email -->
      <div class="mt-12 pt-8 border-t border-gray-200">
        <p class="text-gray-600">
          Have thoughts on this post? 
          <a href="#" 
             class="text-olive hover:text-dark-olive font-semibold transition-colors"
             data-user="tim"
             data-domain="11b.dev"
             onclick="event.preventDefault(); window.location.href='mailto:'+this.getAttribute('data-user')+'@'+this.getAttribute('data-domain')+'?subject=Re: <%= CGI.escape(@post.title) %>';">
            Reply by email
          </a>
        </p>
      </div>
    </article>
  </div>
</section>
